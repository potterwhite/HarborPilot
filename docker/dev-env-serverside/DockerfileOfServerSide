# 使用与主开发环境相同的基础镜像
FROM ubuntu:22.04

# 安装 distcc
RUN apt-get update && apt-get install -y \
    distcc \
    && rm -rf /var/lib/apt/lists/*

# 添加启动脚本
COPY entrypoint.sh /usr/local/bin/
RUN chmod +x /usr/local/bin/entrypoint.sh

# 创建工具链目录
RUN mkdir -p /opt/toolchains

ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]